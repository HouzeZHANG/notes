# 2022-02-21-构建之法-2-1-单元测试

## 单元测试Unitest

### 好的单元测试的标准

#### 原子性

应该准确、快速地保证程序基本模块的正确性，应该测试程序中最基本的单元——比如类，或者功能点（由几个基本类组成的功能点）

程序中最基本的功能点也因该由一个类及其方法表现

#### 覆盖性

单元测试要测试API中的每一个方法及每一个参数

单元测试由最熟悉代码的人书写，在设计的时候就写好单元测试

#### 速度性

单元测试要快，一个类的测试要在几秒钟内完成

测试组可以分类，数据库层，网络通信层，客户逻辑层和用户界面层。如果只修改了用户界面的代码，只需运行“用户界面”的单元测试

#### 可重复性

单元测试应该产生可重复、一致的结果。如果单元测试的结果是错的，那一定是程序出了问题，而且这个错误一定是可以重复的

#### 隔离性

一般情况下，单元测试中的模块可以直接引用其他模块

### Teardown阶段

在Teardown阶段删除在单元测试阶段删除，如果单元测试在测试的时候删除或者修改了数据库，那么应该删除或者回复这些记录。或者每一个单元测试使用一个新的数据库，这样可以隔离各个单元测试

### 单元测试的自动化

单元测试应该能自动执行

单元测试应该集成到自动测试的框架中

另一个重要的措施是要把单元测试自动化，这样每个人都能随时、随地运行单元测试。团队一般是在每日构建之后运行单元测试的，这样单元测试的错误就能及时被发现并得到修改。单元测试必须和产品代码一起保存和维护。**单元测试必须和代码一起进行版本维护**。如果不是这样，过了一阵，代码和单元测试就会出现不一致，程序员要花时间来确认哪些是程序出现的错误，哪些是由于单元测试滞后造成的错误。这样就失去了单元测试的意义，同时又给大家增加了负担。如此折腾多次以后，大家就会觉得维护单元测试费时又费力

## 回归测试Regression Test

return to a worse or less developed state

建立Baseline——一个模块所有的单元测试

确保在新加入功能之后，其他功能能够正常运行

### 回归测试的目的

验证新的代码的确改正了缺陷 

同时要验证新的代码有没有破坏模块的现有功能，有没有Regression

在一个项目的最后稳定阶段，所有人都要参加全面的测试工作，把所有以前发现并修复的Bug找出来，一个一个验证，以保证所有已经修复过的Bug的确得到了修复，并且没有在最后一个版本中“复发”，这是一个大规模的、全面的“回归测试”

## 能效分析

待续

## 个人开发流程PSP Personal Software Process

![image-20220221082729093](C:\Users\25230\AppData\Roaming\Typora\typora-user-images\image-20220221082729093.png)

